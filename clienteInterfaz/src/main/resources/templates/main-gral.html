<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/layout :: layout('MetaMapa', ~{::link}, ~{::section})}"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security" >
<head>
    <link th:href="@{/css/styles-main.css}" rel="stylesheet">
</head>
<body>
    <!-- Main -->
    <!--<section class="d-flex justify-content-center flex-column align-items-center" style="padding-top: 200px">
        <h2 class="title-main text-md-center">¿Qué querés hacer?</h2>

        <a th:href="@{/hechos/nav-hechos}"><button class="btn btn-sin-login btn-lg mb-3" aria-label="Ir a la sección de Navegar Hechos">Navegar Hechos</button></a>
        <a th:href="@{/colecciones}"><button class="btn btn-sin-login btn-lg mb-3" aria-label="Ver las Colecciones">Ver Colecciones</button></a>
        <a th:href="@{/hechos/subir-hecho}"><button class="btn btn-sin-login btn-lg mb-3" aria-label="Subir un Nuevo Hecho al sistema">Subir un Hecho</button></a>
&lt;!&ndash;        <a href="hecho-completo.html"><button id="btn-solicitar-eliminacion" class="btn btn-sin-login btn-lg mb-3" aria-label="Solicitar eliminacion de un hecho">Solicitar Eliminación</button></a>&ndash;&gt;

        <a sec:authorize="hasRole('CONTRIBUYENTE')"  th:href="@{/hechos/mis-hechos}">
            <button class="btn btn-sin-login btn-lg mb-3" aria-label="Ver Hechos que subí al sistema">
                Ver mis Hechos
            </button>
        </a>

        <a th:href="@{/iniciar-sesion}"><button class="btn btn-back btn-lg mb-3" aria-label="Volver a la página anterior">Volver atrás</button></a>

        &lt;!&ndash; Alerts por flash attributes &ndash;&gt;
        <th:block th:if="${success != null}">
            <script th:inline="javascript">
                alert(/*[[${success}]]*/'');
            </script>
        </th:block>

        <th:block th:if="${error != null}">
            <script th:inline="javascript">
                alert(/*[[${error}]]*/'');
            </script>
        </th:block>

    </section>-->
    <section class="mm-main d-flex flex-column align-items-center">
        <h2 class="title-main text-md-center mb-4">¿Qué querés hacer?</h2>

        <div class="mm-main-actions">
            <a class="mm-main-action"
               th:href="@{/hechos/nav-hechos}"
               aria-label="Ir a la sección de Navegar Hechos">
                <span class="mm-main-action__icon"><i class="fa-solid fa-map"></i></span>
                <span class="mm-main-action__text">Navegar hechos</span>
            </a>

            <a class="mm-main-action"
               th:href="@{/colecciones}"
               aria-label="Ver las Colecciones">
                <span class="mm-main-action__icon"><i class="fa-regular fa-folder-open"></i></span>
                <span class="mm-main-action__text">Ver colecciones</span>
            </a>

            <a class="mm-main-action"
               th:href="@{/hechos/subir-hecho}"
               aria-label="Subir un Nuevo Hecho al sistema">
                <span class="mm-main-action__icon"><i class="fa-solid fa-plus"></i></span>
                <span class="mm-main-action__text">Subir un hecho</span>
            </a>

            <a class="mm-main-action"
               sec:authorize="hasRole('CONTRIBUYENTE')"
               th:href="@{/hechos/mis-hechos}"
               aria-label="Ver Hechos que subí al sistema">
                <span class="mm-main-action__icon"><i class="fa-regular fa-star"></i></span>
                <span class="mm-main-action__text">Ver mis hechos</span>
            </a>
        </div>

        <div class="mt-4">
            <a class="btn btn-back btn-lg mb-3"
               th:href="@{/}"
               aria-label="Volver a la página anterior">
                Volver atrás
            </a>
        </div>

        <!-- Alerts por flash attributes -->
        <th:block th:if="${success != null}">
            <script th:inline="javascript">
                alert(/*[[${success}]]*/'');
            </script>
        </th:block>

        <th:block th:if="${error != null}">
            <script th:inline="javascript">
                alert(/*[[${error}]]*/'');
            </script>
        </th:block>
    </section>

    <!-- Par que funcione el collapse -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
            crossorigin="anonymous"></script>

    <script>
        /*document.addEventListener("DOMContentLoaded", () => {
          const auth = JSON.parse(localStorage.getItem("mm_auth") || sessionStorage.getItem("mm_auth"));
          const btn = document.getElementById("btn-solicitar-eliminacion");
          console.log("auth:", auth); //para ver q es lo q toma de datos auth
          if (btn) {
            console.log("btn encontrado");
            if (!auth || auth.role !== "contribuyente") {
              btn.style.display = "none";
              console.log("Botón ocultado");
            }
          } else {
            console.log("btn NO encontrado");
          }
        });*/
    </script>

</body>
</html>
